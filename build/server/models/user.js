// Generated by CoffeeScript 1.8.0
var User, americano;

americano = require('americano-cozy');

module.exports = User = americano.getModel('User', {
  timezone: {
    type: String,
    "default": "Europe/Paris"
  }
});

User.getTimezone = function(callback) {
  return User.all(function(err, users) {
    var _ref;
    if (err) {
      return callback(err);
    }
    return callback(null, (users != null ? (_ref = users[0]) != null ? _ref.timezone : void 0 : void 0) || "Europe/Paris");
  });
};

User.updateUser = function(callback) {
  return User.getTimezone(function(err, timezone) {
    if (err) {
      console.log(err);
      User.timezone = 'Europe/Paris';
    } else {
      User.timezone = timezone || "Europe/Paris";
    }
    return typeof callback === "function" ? callback() : void 0;
  });
};
